<ui:composition 
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:b="http://bootsfaces.net/ui"
    xmlns:p="http://primefaces.org/ui">
    <b:row>
        <b:panelGrid id="pgMaterias" colSpans="6,6">
            <b:column>
                <h:form id="form-tab-materia-02">
                    <b:panel title="Materia" collapsible="false">
                        <p:messages id="msgs01" autoUpdate="true" closable="true"/>
                        <h:outputLabel value="Nombre Materia"/>
                        <b:inputText value="#{adminMateriaBean.materia.nombreMateria}" title="Nombre Materia" placeholder="Nombre" maxlength="20" required="true"/>
                        <h:outputLabel value="Horas a la Semana"/>
                        <b:inputText value="#{adminMateriaBean.materia.horasSemana}" title="Horas a la Semana" placeholder="Horas" required="true">
                            <f:validateDoubleRange minimum="1" maximum="10" />
                        </b:inputText>
                        <h:outputLabel value="Observaciones"/>
                        <p:inputTextarea value="#{adminMateriaBean.materia.observacion}" title="Observaciones" rows="4" placeholder="N/A" style="width: 100%" autoResize="false"/>
                        <h:outputLabel value="Nivel Academico"/>
                        <b:selectOneMenu value="#{adminMateriaBean.materia.nivelAcademicoId}" title="Nivel Academico" required="true">
                            <f:selectItem  itemLabel="Seleccione un Nivel" itemValue="" />
                            <f:selectItems value="#{adminMateriaBean.nivelesAcademicos.entrySet()}" var="entry"
                                           itemValue="#{entry.value}" itemLabel="#{entry.key}" />
                        </b:selectOneMenu>
                        <p:outputLabel value="Salon: " />
                        <b:selectOneMenu value="#{adminMateriaBean.materia.salonId}" required="true" title="Salon">
                            <f:selectItem  itemLabel="Seleccione un Salon" itemValue="" />
                            <f:selectItems value="#{adminMateriaBean.salones.entrySet()}" var="entry"
                                           itemValue="#{entry.value}" itemLabel="#{entry.key}" />
                        </b:selectOneMenu>
                        <b:row>
                            <b:column style="text-align: center;">
                                <b:commandButton icon="ui-icon-check" value="Registrar Materia" title="Registrar Materia" action="#{adminMateriaBean.createMateria()}"
                                                 update=":form-tab-cours:panel-01:tab-cours"/>
                            </b:column>
                        </b:row>
                    </b:panel>
                </h:form>
            </b:column>
            <b:column>
                <h:form>
                    <b:panel title="Materias Registradas" collapsible="false">
                        <p:dataTable var="varMateria" value="#{adminMateriaBean.materias}" paginator="true" rows="5" paginatorPosition="bottom" editable="true">

                            <p:ajax event="rowEdit" listener="#{adminMateriaBean.onRowEdit}" update=":form-tab-materia-02:msgs01" />
                            <p:ajax event="rowEditCancel" listener="#{adminMateriaBean.onRowCancel}" update=":form-tab-materia-02:msgs01" />

                            <p:column headerText="Nombre">
                                <p:cellEditor>
                                    <f:facet name="output"><h:outputText value="#{varMateria.nombreMateria}" /></f:facet>
                                    <f:facet name="input"><p:inputText value="#{varMateria.nombreMateria}" style="width:100%"/></f:facet>
                                </p:cellEditor> 
                            </p:column>
                            <p:column headerText="Horas">                                
                                <p:cellEditor>
                                    <f:facet name="output"><h:outputText value="#{varMateria.horasSemana}" /></f:facet>
                                    <f:facet name="input"><p:inputText value="#{varMateria.horasSemana}" style="width:100%"/></f:facet>
                                </p:cellEditor> 
                            </p:column>
                            <p:column headerText="Observaciones">
                                <p:cellEditor>
                                    <f:facet name="output"><h:outputText value="#{varMateria.observacion}" /></f:facet>
                                    <f:facet name="input"><p:inputText value="#{varMateria.observacion}" style="width:100%"/></f:facet>
                                </p:cellEditor> 
                            </p:column>
                            <p:column headerText="Nivel">
                                <p:cellEditor>
                                    <f:facet name="output"><h:outputText value="#{varMateria.nivelAcademicoId.nombreNivel}" /></f:facet>
                                    <f:facet name="input"><p:inputText value="#{varMateria.nivelAcademicoId.nombreNivel}" style="width:100%"/></f:facet>
                                </p:cellEditor> 
                            </p:column>
                            <p:column style="width:32px">
                                <p:rowEditor />
                            </p:column>
                        </p:dataTable>
                        <p:spacer/>
                        <b:row>
                            <b:column style="text-align: center;">
                                <b:commandButton icon="ui-icon-check" value="Mostrar Materias" title="Mostrar Materias" action="#{adminMateriaBean.findAllMaterias()}" update="pgMaterias"/>
                            </b:column>
                        </b:row>
                    </b:panel>
                </h:form>
            </b:column>
        </b:panelGrid>
    </b:row>
</ui:composition>